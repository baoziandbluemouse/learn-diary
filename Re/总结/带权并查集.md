---
date: 2025-03-30
tags:
  - 带权并查集
---
# 作用

经典并查集可以做到:
- 任意两个点，查他们是不是属于一个集合，即是否连通

带权并查集可以做到:
- 不仅可以查询是不是一个集合，也可以维护同样一个集合中，两个点相互之间的关系

接下来讲带权并查集的经典模型

# 一维数轴的相对距离模型

假设所有点落在x轴上，给你若干两点的关系

如果a->b的距离为100，则意味着a在b的右侧，距离为100

如果c->d的距离为-20，则意味着c在d的左侧，距离为20

我们用一个数组dist[i]代表一个点到该集合中源点的距离

a->b = 100 -> dist[a]=100

此时再给出一个关系a->c的距离为-60，那么我们就可以将{a,b}和{c,d}两个集合合并，得出更多相对距离

b -> a -> c -> d

假设现在以d为源点，dist[b]=c->d - a->b + a->c=180

此时能发现dist[a]已经是过期的数据，这种数据的更新时间是当我们使用root时更新

dist[a]=a->b + b->d （即自己过期的数据加上祖先更新的数据）

并且pre[a]=d

对于给出的关系: a b 100   (字母1 字母2 权值)

dist的更新方式是: dist[root(前)] = dist[root(后)]-dist[root(前)]+w (初始化dist=0) 

使用root函数时，dist值会进行修正

所以带权并查集就是以源点为桥梁，得出了一个集合中任意两点的关系