---
date: 2025-09-15
---

# [D - Long Waiting](https://atcoder.jp/contests/abc423/tasks/abc423_d)

**关键点在于处理餐厅容量不足时的等待情况：当一组顾客无法立即进入时，必须等待餐厅内的某些组离开以释放空间。**

1. 使用优先队列来管理当前在餐厅中的组，存储每组离开餐厅的时间和人数
2. 当一组顾客无法进入时，从优先队列里一直取出人，直到当前这组可以进入。
3. 每组顾客最多会被取出一次，复杂度正确。

做法:

- 初始化当前剩余容量now为**K**,当前时间t为0
- 对于每组顾客(按时间顺序):

1. **检查容量**:如果now小于这组顾客的人数C，那就让队列把最早离开餐厅的小组弹出，把now加回去，直到容量符合要求，每次弹出时，更新时间t
2. **更新时间**:符合要求后，当前时间t取(**t**,这组顾客到达时间**A**)的**最大值**
3. 输出进入时间
4. 更新状态:减少now，并将该组的离开时间和人数加入优先队列