---
date: 2025-10-12
---
# [D - The Simple Game](https://atcoder.jp/contests/abc427/tasks/abc427_d)

赛时注意到k很小，但想不到怎么动态规划,事实上确实可以用记忆化搜索写出

- 当前操作的人如果想赢 **等价于** 操作后下一个人无论如何操作都会输。
- $dp[u][k][c]$定义为当前在顶点u，剩余步数为k，当前玩家希望最终字符为c（0表示A，1表示B），是否可行
- 状态转移：

如果 K = 0 ，则游戏结束，判断当前顶点字符是否等于期望字符

如果 K > 0 , 当前玩家选择出一条边从u到v

1. *当前玩家希望达到结果 c，则对手希望达到相反结果 1-c*
2. 如果存在一个后继节点v，使得下一个玩家无法在剩余k-1步内到达1-c，则当前玩家可以获胜

- 也就是对于当前状态(u,k,c),只要能达到一个状态满足$dp[v][k-1][1-c]$=0,就说明从u走到v后下一个人没法赢，那现在的人就赢了。