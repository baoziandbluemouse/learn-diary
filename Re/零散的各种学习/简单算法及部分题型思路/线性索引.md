---
date: 2025-02-23
tags:
  - 线性索引
---
```cpp
 假设网格坐标系：

 - 行号 i ∈ [1, n] （从1开始计数）

 - 列号 j ∈ [1, m] （从1开始计数）

 - 每行有 m 列

  

 int linear_index = (i-1)*m + (j-1);  //线性索引 = 行偏移 + 列偏移

  

 等效转换：

 行偏移 = (当前行号-1) * 总列数  // 定位到所在行起始位置

 列偏移 = (当前列号-1)         // 定位到所在列

  

 二维坐标     计算过程        一维索引

 (1,1) → (0)*5 + 0 = 0

 (1,2) → (0)*5 + 1 = 1

 (2,3) → (1)*5 + 2 = 7

 (3,4) → (2)*5 + 3 = 13
```


这种转换方式实现了：

1. **行优先存储**：同一行的元素索引连续，下一行的索引从上一行的末尾开始
2. **无冲突映射**：每个二维坐标对应唯一的一维索引
3. **可逆性**：可通过取模运算还原二维坐标（索引/m 得到行号，索引%m 得到列号）

**一维向二维的转换**

```cpp
// 输入：线性索引 index，网格列数 m
// 输出：pair<行号, 列号>（从1开始计数）

pair<int, int> convert(int index, int m) {
    int row = index / m + 1;  // 计算行号
    int col = index % m + 1; // 计算列号
    return {row, col};
}

```
